---
id: zrt5hm2q
title: Processing Chess game with ML
file_version: 1.1.3
app_version: 1.18.42
---

We need two tables to determine the next move for our chess game.

This would involve getting the FEN position of pieces and the next move made in the training data

FEN position: [https://www.wikiwand.com/en/Forsyth%E2%80%93Edwards\_Notation](https://www.wikiwand.com/en/Forsyth%E2%80%93Edwards_Notation)

"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"

nbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR is the board representation

"w" is the player that is currently playing

"KQkq" describes black and white kings' ability to castle

For adding the next\_move column the following sql scripts should run:

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ app/src/main/kotlin/chess/database/chess_database_columns.sql
```plsql
23     CREATE TABLE CHESS_DATA_NEW AS
24     SELECT
25         ROUND_ID,
26         GAME_ID,
27         ROUND,
28         BOARD_REPRESENTATION,
29         BOARD_REPRESENTATION_INT,
30         PIECE_COUNT,
31         LEGAL_MOVES,
32         THREATS_AND_ATTACKS,
33         PIECE_ACTIVITY,
34         KING_SAFETY,
35         PAWN_STRUCTURE,
36         MATERIAL_BALANCE,
37         CENTER_CONTROL,
38         PREVIOUS_MOVES,
39         MOVE,
40         WHITE_WINS,
41         BLACK_WINS,
42         WINNER,
43         COALESCE(LEAD(MOVE) OVER (PARTITION BY GAME_ID ORDER BY ROUND), 'END') AS NEXT_MOVE
44     FROM CHESS_DATA;
45     
46     DROP TABLE CHESS_DATA;
47     
48     ALTER TABLE CHESS_DATA_NEW
49         RENAME TO CHESS_DATA;
```

<br/>

CNN can be used to determine the best move - example use case: [https://www.kaggle.com/code/ancientaxe/simple-cnn-model-using-torch](https://www.kaggle.com/code/ancientaxe/simple-cnn-model-using-torch)

For figuring out a library to integrate with machine learning: [https://www.reddit.com/r/Kotlin/comments/8w2fld/comment/e1tjnzd/?utm\_source=share&utm\_medium=web3x&utm\_name=web3xcss&utm\_term=1&utm\_content=share\_button](https://www.reddit.com/r/Kotlin/comments/8w2fld/comment/e1tjnzd/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button)

Using deepLearning4j:

[https://deeplearning4j.konduit.ai/](https://deeplearning4j.konduit.ai/)

imports for mac arm processor:

<br/>


<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ app/build.gradle.kts
```kotlin
29         implementation("org.deeplearning4j:deeplearning4j-core:1.0.0-M2.1")
30         implementation("org.datavec:datavec-api:1.0.0-M2.1")
31     
32         implementation ("org.nd4j:nd4j-native:1.0.0-M2.1")
33         implementation ("org.nd4j:nd4j-native:1.0.0-M2.1:macosx-arm64")
34         implementation ("org.bytedeco:openblas:0.3.21-1.5.8:macosx-arm64")
```

<br/>

<div align="center"><img src="https://firebasestorage.googleapis.com/v0/b/swimmio.appspot.com/o/repositories%2FZ2l0aHViJTNBJTNBQ2hlc3MlM0ElM0FvYnNjdXJlLXN0YXI%3D%2F9cbb2fa0-e488-4272-9a74-85efe436a9d4.png?alt=media&token=b58b0db2-c141-4ac0-a662-5154a1237c07" style="width:'100%'"/></div>

<br/>

The output should look similar to this

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBQ2hlc3MlM0ElM0FvYnNjdXJlLXN0YXI=/docs/zrt5hm2q).
